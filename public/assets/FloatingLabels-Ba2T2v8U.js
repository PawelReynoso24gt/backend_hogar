import{_ as N,r as d,n as g,g as W,o as K,d as m,m as t,q as p,t as F,v as L,F as O,u as T,b as f,y as k,z,A as R}from"./index-Ca4MJmB5.js";import{E as U}from"./jspdf.plugin.autotable-BZfwaWVG.js";import{a as y}from"./axios-B4uVmeYG.js";const V={name:"Accordion",setup(){const o=d(""),i=d(""),h=d("PROYECTO CAPILLA"),c=d("Dirección del Proyecto"),s=g([]),u=d(""),e=n=>typeof n=="number"?n.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):n,C=()=>{y.get("http://hogarsantaluisa.test/cuentasB/getConcatenada").then(n=>{s.splice(0,s.length,...n.data),console.log(n.data)}).catch(n=>{console.error(n)})},S=W(()=>s.find(n=>n.cuenta_bancaria===u.value)),w=async()=>{var n;try{const B=(await y.post("http://hogarsantaluisa.test/in_eg/fechaBancoCA",{fechaInicial:o.value,fechaFinal:i.value,banco_y_cuenta:u.value})).data,l=new U("landscape");l.setFontSize(16),l.text(h.value,148.5,27,{align:"center"}),l.rect(60,17,170,15),l.setFontSize(12),l.text(`Dirección del Proyecto: ${c.value}`,20,40);const D="REPORTE: LIBRO BANCOS";l.setFontSize(10),l.text(D,20,50);const I=`ESPECIFICACIÓN: Desde: ${o.value}, Hasta: ${i.value}`;l.text(I,20,60);const x=`CUENTA BANCARIA: ${((n=S.value)==null?void 0:n.nombre_cuenta)||""}`;l.text(x,20,70);const P=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],A=B.map(a=>{const v=a.total?`Q. ${e(parseFloat(a.total))}`:"";return a.cuenta==="Saldo inicial"||a.cuenta==="Suma total Banco"?{nomenclatura:a.nomenclatura,fecha:a.fecha||"",cuenta:a.cuenta,descripcion:a.descripcion,acredita:"",debita:"",total:{content:v,styles:{fontStyle:"bold"}},borderBottom:{width:4,color:[0,0,0],double:!0}}:{nomenclatura:a.nomenclatura,fecha:a.fecha,cuenta:a.cuenta,descripcion:a.descripcion,acredita:a.acredita?`Q. ${e(parseFloat(a.acredita))}`:"",debita:a.debita?`Q. ${e(parseFloat(a.debita))}`:"",total:v}});l.autoTable({columns:P,body:A,startY:75,theme:"grid",styles:{cellPadding:2.5,fontSize:7,halign:"center",valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:20,overflow:"visible",halign:"left"},fecha:{minCellWidth:20,overflow:"visible",halign:"left"},descripcion:{minCellWidth:40,overflow:"linebreak",halign:"left"},cuenta:{minCellWidth:40,overflow:"linebreak",halign:"left"},acredita:{minCellWidth:20,halign:"right"},debita:{minCellWidth:20,halign:"right"},total:{minCellWidth:20,halign:"right"}},tableWidth:"auto",margin:{left:10,right:10}});const _=await(await window.showSaveFilePicker({suggestedName:"libro_bancos_capilla.pdf",types:[{description:"PDF Files",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await _.write(l.output("blob")),await _.close()}catch(b){console.error("Error al generar el PDF:",b)}};return K(()=>{C()}),{fechaInicial:o,fechaFinal:i,nombreEncabezado:h,direccionProyecto:c,cuentas_bancarias:s,cuentaBName:u,generarPDF:w}}},r=o=>(z("data-v-329df65e"),o=o(),R(),o),M=r(()=>t("label",null,"LIBRO DE BANCOS",-1)),Q={class:"division-container"},G={class:"numero-fecha-container"},Y={class:"fecha-inputs"},$=r(()=>t("label",null,"Fecha Inicial",-1)),q={class:"fecha-inputs"},H=r(()=>t("label",null,"Fecha Final",-1)),j={class:"division-container"},J={class:"numero-fecha-container"},X={class:"numero-inputs"},Z=r(()=>t("label",null,"Cuenta bancaria:",-1)),E=["value"],aa=r(()=>t("div",{style:{"margin-top":"20px"}},null,-1));function ta(o,i,h,c,s,u){return f(),m("div",null,[M,t("div",Q,[t("div",G,[t("div",Y,[$,p(t("input",{type:"date","onUpdate:modelValue":i[0]||(i[0]=e=>c.fechaInicial=e)},null,512),[[F,c.fechaInicial]])]),t("div",q,[H,p(t("input",{type:"date","onUpdate:modelValue":i[1]||(i[1]=e=>c.fechaFinal=e)},null,512),[[F,c.fechaFinal]])])])]),t("div",j,[t("div",J,[t("div",X,[Z,p(t("select",{"onUpdate:modelValue":i[2]||(i[2]=e=>c.cuentaBName=e)},[(f(!0),m(O,null,T(c.cuentas_bancarias,e=>(f(),m("option",{value:e.cuenta_bancaria},k(e.banco_y_cuenta),9,E))),256))],512),[[L,c.cuentaBName]])])])]),aa,t("button",{onClick:i[3]||(i[3]=(...e)=>c.generarPDF&&c.generarPDF(...e))},"Generar PDF")])}const la=N(V,[["render",ta],["__scopeId","data-v-329df65e"]]);export{la as default};
