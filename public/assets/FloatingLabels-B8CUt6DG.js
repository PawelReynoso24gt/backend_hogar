import{_ as w,r,n as W,g,o as K,d as m,m as t,q as f,t as v,v as L,F as O,u as T,b as p,y as z,z as R,A as k}from"./index-Dv1Q5dJW.js";import{E as U}from"./jspdf.plugin.autotable-UDwUbEO_.js";import{a as F}from"./axios-B4uVmeYG.js";import{F as V}from"./FileSaver.min-00UMhEch.js";const M={name:"Accordion",setup(){const l=r(""),c=r(""),h=r("PROYECTO CAPILLA"),i=r("Dirección del Proyecto"),s=W([]),u=r(""),e=n=>typeof n=="number"?n.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):n,y=()=>{F.get("http://hogarsantaluisa.test/cuentasB/getConcatenada").then(n=>{s.splice(0,s.length,...n.data),console.log(n.data)}).catch(n=>{console.error(n)})},C=g(()=>s.find(n=>n.cuenta_bancaria===u.value)),S=async()=>{var n;try{const B=(await F.post("http://hogarsantaluisa.test/in_eg/fechaBancoCA",{fechaInicial:l.value,fechaFinal:c.value,banco_y_cuenta:u.value})).data,o=new U("landscape");o.setFontSize(16),o.text(h.value,148.5,27,{align:"center"}),o.rect(60,17,170,15),o.setFontSize(12),o.text(`Dirección del Proyecto: ${i.value}`,20,40);const x="REPORTE: LIBRO BANCOS";o.setFontSize(10),o.text(x,20,50);const I=`ESPECIFICACIÓN: Desde: ${l.value}, Hasta: ${c.value}`;o.text(I,20,60);const A=`CUENTA BANCARIA: ${((n=C.value)==null?void 0:n.nombre_cuenta)||""}`;o.text(A,20,70);const D=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],P=B.map(a=>{const b=a.total?`Q. ${e(parseFloat(a.total))}`:"";return a.cuenta==="Saldo inicial"||a.cuenta==="Suma total Banco"?{nomenclatura:a.nomenclatura,fecha:a.fecha||"",cuenta:a.cuenta,descripcion:a.descripcion,acredita:"",debita:"",total:{content:b,styles:{fontStyle:"bold"}},borderBottom:{width:4,color:[0,0,0],double:!0}}:{nomenclatura:a.nomenclatura,fecha:a.fecha,cuenta:a.cuenta,descripcion:a.descripcion,acredita:a.acredita?`Q. ${e(parseFloat(a.acredita))}`:"",debita:a.debita?`Q. ${e(parseFloat(a.debita))}`:"",total:b}});o.autoTable({columns:D,body:P,startY:75,theme:"grid",styles:{cellPadding:2.5,fontSize:7,halign:"center",valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:20,overflow:"visible",halign:"left"},fecha:{minCellWidth:20,overflow:"visible",halign:"left"},descripcion:{minCellWidth:40,overflow:"linebreak",halign:"left"},cuenta:{minCellWidth:40,overflow:"linebreak",halign:"left"},acredita:{minCellWidth:20,halign:"right"},debita:{minCellWidth:20,halign:"right"},total:{minCellWidth:20,halign:"right"}},tableWidth:"auto",margin:{left:10,right:10}});const N=o.output("blob");V.saveAs(N,"libro_bancos_capilla.pdf")}catch(_){console.error("Error al generar el PDF:",_)}};return K(()=>{y()}),{fechaInicial:l,fechaFinal:c,nombreEncabezado:h,direccionProyecto:i,cuentas_bancarias:s,cuentaBName:u,generarPDF:S}}},d=l=>(R("data-v-4f5e0ca8"),l=l(),k(),l),Q=d(()=>t("label",null,"LIBRO DE BANCOS",-1)),G={class:"division-container"},Y={class:"numero-fecha-container"},$={class:"fecha-inputs"},q=d(()=>t("label",null,"Fecha Inicial",-1)),H={class:"fecha-inputs"},j=d(()=>t("label",null,"Fecha Final",-1)),J={class:"division-container"},X={class:"numero-fecha-container"},Z={class:"numero-inputs"},E=d(()=>t("label",null,"Cuenta bancaria:",-1)),aa=["value"],ta=d(()=>t("div",{style:{"margin-top":"20px"}},null,-1));function ea(l,c,h,i,s,u){return p(),m("div",null,[Q,t("div",G,[t("div",Y,[t("div",$,[q,f(t("input",{type:"date","onUpdate:modelValue":c[0]||(c[0]=e=>i.fechaInicial=e)},null,512),[[v,i.fechaInicial]])]),t("div",H,[j,f(t("input",{type:"date","onUpdate:modelValue":c[1]||(c[1]=e=>i.fechaFinal=e)},null,512),[[v,i.fechaFinal]])])])]),t("div",J,[t("div",X,[t("div",Z,[E,f(t("select",{"onUpdate:modelValue":c[2]||(c[2]=e=>i.cuentaBName=e)},[(p(!0),m(O,null,T(i.cuentas_bancarias,e=>(p(),m("option",{value:e.cuenta_bancaria},z(e.banco_y_cuenta),9,aa))),256))],512),[[L,i.cuentaBName]])])])]),ta,t("button",{onClick:c[3]||(c[3]=(...e)=>i.generarPDF&&i.generarPDF(...e))},"Generar PDF")])}const la=w(M,[["render",ea],["__scopeId","data-v-4f5e0ca8"]]);export{la as default};
