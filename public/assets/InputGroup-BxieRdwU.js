import{_ as C,r,d as I,m as e,q as h,t as f,b as S,z as x,A as D}from"./index-Dv1Q5dJW.js";import{E as A}from"./jspdf.plugin.autotable-UDwUbEO_.js";import{a as P}from"./axios-B4uVmeYG.js";import{F as w}from"./FileSaver.min-00UMhEch.js";const z={name:"Accordion",setup(){const o=r(""),n=r(""),s=r("PROYECTO CAPILLA"),l=r("15 avenida, entre 3a y 4a calle zona 3, Quetzaltenango"),c=a=>typeof a=="number"?a.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):a;return{fechaInicial:o,fechaFinal:n,nombreEncabezado:s,direccionProyecto:l,generarPDF:async()=>{try{const p=(await P.post("http://hogarsantaluisa.test/in_eg/fechaCA",{fechaInicial:o.value,fechaFinal:n.value})).data,i=new A({orientation:"landscape"});i.setFontSize(16),i.text(s.value,148.5,27,{align:"center"}),i.rect(60,17,170,15),i.setFontSize(12),i.text(`Dirección del Proyecto: ${l.value}`,20,40);const b="REPORTE: LIBRO CAJA";i.setFontSize(10),i.text(b,20,50);const F=`ESPECIFICACIÓN: Desde: ${o.value}, Hasta: ${n.value}`;i.text(F,20,60);const _=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],v=p.map(t=>{const u=t.total?`Q. ${c(parseFloat(t.total))}`:"";return t.cuenta==="Saldo inicial"||t.cuenta==="Suma total Caja"?{nomenclatura:t.nomenclatura,fecha:t.fecha||"",cuenta:t.cuenta,descripcion:t.descripcion,acredita:"",debita:"",total:{content:u,styles:{fontStyle:"bold"}},borderBottom:{width:4,color:[0,0,0],double:!0}}:{nomenclatura:t.nomenclatura,fecha:t.fecha,cuenta:t.cuenta,descripcion:t.descripcion,acredita:t.acredita?`Q. ${c(parseFloat(t.acredita))}`:"",debita:t.debita?`Q. ${c(parseFloat(t.debita))}`:"",total:u}});i.autoTable({columns:_,body:v,startY:65,theme:"grid",styles:{cellPadding:2.5,fontSize:7,halign:"center",valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:20,overflow:"visible",halign:"left"},fecha:{minCellWidth:20,overflow:"visible",halign:"left"},descripcion:{minCellWidth:40,overflow:"linebreak",halign:"left"},cuenta:{minCellWidth:40,overflow:"linebreak",halign:"left"},acredita:{minCellWidth:20,halign:"right"},debita:{minCellWidth:20,halign:"right"},total:{minCellWidth:20,halign:"right"}},tableWidth:"auto",margin:{left:10,right:10}});const y=i.output("blob");w.saveAs(y,"libro_caja_capilla.pdf")}catch(a){console.error("Error al generar el PDF:",a)}}}}},d=o=>(x("data-v-2b247bf9"),o=o(),D(),o),W=d(()=>e("label",null,"LIBRO DE CAJA",-1)),K={class:"division-container"},B={class:"numero-fecha-container"},k={class:"fecha-inputs"},L=d(()=>e("label",null,"Fecha Inicial",-1)),O={class:"fecha-inputs"},R=d(()=>e("label",null,"Fecha Final",-1)),T=d(()=>e("div",{style:{"margin-top":"20px"}},null,-1));function Q(o,n,s,l,c,m){return S(),I("div",null,[W,e("div",K,[e("div",B,[e("div",k,[L,h(e("input",{type:"date","onUpdate:modelValue":n[0]||(n[0]=a=>l.fechaInicial=a)},null,512),[[f,l.fechaInicial]])]),e("div",O,[R,h(e("input",{type:"date","onUpdate:modelValue":n[1]||(n[1]=a=>l.fechaFinal=a)},null,512),[[f,l.fechaFinal]])])])]),T,e("button",{onClick:n[2]||(n[2]=(...a)=>l.generarPDF&&l.generarPDF(...a))},"Generar PDF")])}const j=C(z,[["render",Q],["__scopeId","data-v-2b247bf9"]]);export{j as default};
