import{_ as w,r as d,d as C,m as a,q as h,t as f,b as D,z as I,A as S}from"./index-Ca4MJmB5.js";import{E as P}from"./jspdf.plugin.autotable-BZfwaWVG.js";import{a as x}from"./axios-B4uVmeYG.js";const A={name:"Accordion",setup(){const o=d(""),i=d(""),s=d("PROYECTO AGRÍCOLA"),l=d("8va calle 5-21 zona 10, Quetzaltenango"),c=e=>typeof e=="number"?e.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):e;return{fechaInicial:o,fechaFinal:i,nombreEncabezado:s,direccionProyecto:l,generarPDF:async()=>{try{const b=(await x.post("http://hogarsantaluisa.test/in_eg/libroDiario",{fechaInicial:o.value,fechaFinal:i.value})).data,n=new P("landscape");n.setFontSize(16),n.text(s.value,148.5,27,{align:"center"}),n.rect(60,17,170,15),n.setFontSize(12),n.text(`Dirección del Proyecto: ${l.value}`,20,40);const _="REPORTE: LIBRO DIARIO";n.setFontSize(10),n.text(_,20,50);const F=`ESPECIFICACIÓN: Desde: ${o.value}, Hasta: ${i.value}`;n.text(F,20,60);const v=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Número de Documento",dataKey:"numero_documento"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],y=b.map(t=>{const m=t.total?`Q. ${c(parseFloat(t.total))}`:"";return t.cuenta==="Saldo inicial"||t.cuenta==="Suma total"?{nomenclatura:t.nomenclatura,fecha:t.fecha||"",cuenta:t.cuenta,descripcion:t.descripcion,acredita:"",debita:"",total:{content:m,styles:{fontStyle:"bold"}},numero_documento:t.numero_documento||"-"}:{nomenclatura:t.nomenclatura,fecha:t.fecha,cuenta:t.cuenta,descripcion:t.descripcion,acredita:t.acredita?`Q. ${c(parseFloat(t.acredita))}`:"",debita:t.debita?`Q. ${c(parseFloat(t.debita))}`:"",total:m,numero_documento:t.numero_documento||"-"}});n.autoTable({columns:v,body:y,startY:80,theme:"grid",styles:{cellPadding:3,fontSize:8,halign:"left",valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:20,overflow:"visible",halign:"left"},numero_documento:{minCellWidth:30,overflow:"visible",halign:"left"},fecha:{minCellWidth:20,overflow:"visible",halign:"left"},cuenta:{minCellWidth:40,overflow:"linebreak",halign:"left"},descripcion:{minCellWidth:40,overflow:"linebreak",halign:"left"},acredita:{minCellWidth:20,halign:"right"},debita:{minCellWidth:20,halign:"right"},total:{minCellWidth:20,halign:"right"}}});const u=await(await window.showSaveFilePicker({suggestedName:"libro_diario_agricola.pdf",types:[{description:"PDF Files",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await u.write(n.output("blob")),await u.close()}catch(e){console.error("Error al generar el PDF:",e)}}}}},r=o=>(I("data-v-0b8bd232"),o=o(),S(),o),W=r(()=>a("label",null,"LIBRO DIARIO",-1)),z={class:"division-container"},K={class:"numero-fecha-container"},O={class:"fecha-inputs"},R=r(()=>a("label",null,"Fecha Inicial",-1)),k={class:"fecha-inputs"},B=r(()=>a("label",null,"Fecha Final",-1)),N=r(()=>a("div",{style:{"margin-top":"20px"}},null,-1));function T(o,i,s,l,c,p){return D(),C("div",null,[W,a("div",z,[a("div",K,[a("div",O,[R,h(a("input",{type:"date","onUpdate:modelValue":i[0]||(i[0]=e=>l.fechaInicial=e)},null,512),[[f,l.fechaInicial]])]),a("div",k,[B,h(a("input",{type:"date","onUpdate:modelValue":i[1]||(i[1]=e=>l.fechaFinal=e)},null,512),[[f,l.fechaFinal]])])])]),N,a("button",{onClick:i[2]||(i[2]=(...e)=>l.generarPDF&&l.generarPDF(...e))},"Generar PDF")])}const V=w(A,[["render",T],["__scopeId","data-v-0b8bd232"]]);export{V as default};
