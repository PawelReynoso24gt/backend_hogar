import{a as f}from"./axios-B4uVmeYG.js";import{_ as N,r as i,n as P,o as w,p as B,d as u,m as o,q as _,v as E,F as k,u as M,t as z,y as h,x as V,b as d,z as A,A as F}from"./index-Dv1Q5dJW.js";const L={name:"Cuentas",setup(){const c=i(""),t=i(""),v=i(""),e=i(""),p=i(""),r=i(""),a=P([]),b=P([]),C=P([]),l=i(""),m=i(""),y=i(!1),x=()=>{f.get("http://hogarsantaluisa.test/cuentas/get").then(s=>{a.splice(0,a.length,...s.data)}).catch(()=>{l.value="Error al cargar las cuentas."})},S=()=>{f.get("http://hogarsantaluisa.test/clasificacion/get").then(s=>{b.splice(0,b.length,...s.data)}).catch(()=>{l.value="Error al cargar las clasificaciones."})},U=()=>{f.get("http://hogarsantaluisa.test/proyectos/get").then(s=>{C.splice(0,C.length,...s.data)}).catch(()=>{l.value="Error al cargar los tipos de proyectos."})},D=()=>{r.value&&f.get(`http://hogarsantaluisa.test/cuentas/getCrud/${r.value}`).then(s=>{const n=s.data[0];c.value=n.cuenta,t.value=n.estado?n.estado.toString():"",v.value=n.codigo,e.value=n.clasificacion,p.value=n.proyecto,y.value=!0}).catch(()=>{l.value="Error al cargar los datos del proyecto."})},T=()=>{if(l.value="",m.value="",!c.value||!v.value||!e.value||!p.value){l.value="Por favor, completa todos los campos.";return}const s={cuenta:c.value,codigo:v.value,clasificacion:e.value,proyecto:p.value};f.post("http://hogarsantaluisa.test/cuentas/create",s).then(n=>{m.value="Cuenta guardada correctamente.",x()}).catch(n=>{n.response&&n.response.data?l.value="Error al guardar la cuenta: "+JSON.stringify(n.response.data.errors):l.value="Error al guardar la cuenta."})},j=()=>{if(!r.value){l.value="Por favor, selecciona una cuenta.";return}const s={};if(c.value.trim()!==""&&(s.cuenta=c.value),t.value.trim()!==""&&(s.estado=t.value),v.value.trim()!==""&&(s.codigo=v.value),e.value&&(s.clasificacion=e.value),p.value&&(s.proyecto=p.value),Object.keys(s).length===0){l.value="No hay campos para actualizar.";return}f.put(`http://hogarsantaluisa.test/cuentas/update/${r.value}`,s).then(n=>{m.value="Cuenta actualizada correctamente.",x()}).catch(n=>{l.value="Error al actualizar la cuenta."})},I=()=>{c.value="",t.value="",v.value="",e.value="",p.value="",r.value="",l.value="",m.value="",y.value=!1};return w(()=>{x(),S(),U()}),B(r,()=>{y.value=!!r.value}),{cuenta:c,estado:t,codigo:v,selectedClasificacion:e,selectedTipoProyecto:p,selectedProject:r,projects:a,clasificaciones:b,proyectos:C,insertar:T,actualizar:j,limpiar:I,cargarDatosProyecto:D,errorMessage:l,successMessage:m,isEstadoEnabled:y}}},g=c=>(A("data-v-ef483b2b"),c=c(),F(),c),O={class:"division-container"},q={class:"nombre-fecha-container"},G={class:"id-inputs"},J=g(()=>o("label",null,"Cuentas",-1)),H=["value"],K={class:"nombre-inputs"},Q=g(()=>o("label",null,"Cuentas",-1)),R={class:"numero-input"},W={class:"fecha-inputs"},X=g(()=>o("label",null,"Estado",-1)),Y=["disabled"],Z={class:"fecha-inputs"},$=g(()=>o("label",null,"Código",-1)),ee={class:"id-inputs"},ae=g(()=>o("label",null,"Clasificación",-1)),te=["value"],oe={class:"id-inputs"},se=g(()=>o("label",null,"Proyecto",-1)),le=["value"],ne={key:0,class:"text-danger"},ce={key:1,class:"text-success"},re=g(()=>o("div",{style:{"margin-top":"20px"}},null,-1));function ie(c,t,v,e,p,r){return d(),u("div",null,[o("div",O,[o("div",q,[o("div",G,[J,_(o("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedProject=a),onChange:t[1]||(t[1]=(...a)=>e.cargarDatosProyecto&&e.cargarDatosProyecto(...a))},[(d(!0),u(k,null,M(e.projects,a=>(d(),u("option",{value:a.cuenta,key:a.id_cuentas},h(a.cuenta),9,H))),128))],544),[[E,e.selectedProject]])]),o("div",K,[Q,o("div",R,[_(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>e.cuenta=a)},null,512),[[z,e.cuenta]])])]),o("div",W,[X,_(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>e.estado=a),disabled:!e.isEstadoEnabled},null,8,Y),[[z,e.estado]])]),o("div",Z,[$,_(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>e.codigo=a)},null,512),[[z,e.codigo]])]),o("div",ee,[ae,_(o("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>e.selectedClasificacion=a)},[(d(!0),u(k,null,M(e.clasificaciones,a=>(d(),u("option",{value:a.tipo,key:a.id_clasificacion},h(a.tipo),9,te))),128))],512),[[E,e.selectedClasificacion]])]),o("div",oe,[se,_(o("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>e.selectedTipoProyecto=a)},[(d(!0),u(k,null,M(e.proyectos,a=>(d(),u("option",{value:a.nombre,key:a.id_proyectos},h(a.nombre),9,le))),128))],512),[[E,e.selectedTipoProyecto]])])])]),e.errorMessage?(d(),u("p",ne,h(e.errorMessage),1)):V("",!0),e.successMessage?(d(),u("p",ce,h(e.successMessage),1)):V("",!0),re,o("button",{onClick:t[7]||(t[7]=(...a)=>e.insertar&&e.insertar(...a))},"Guardar"),o("button",{onClick:t[8]||(t[8]=(...a)=>e.actualizar&&e.actualizar(...a)),style:{"margin-left":"10px"}},"Actualizar"),o("button",{onClick:t[9]||(t[9]=(...a)=>e.limpiar&&e.limpiar(...a)),style:{"margin-left":"10px"}},"Limpiar")])}const ve=N(L,[["render",ie],["__scopeId","data-v-ef483b2b"]]);export{ve as default};
