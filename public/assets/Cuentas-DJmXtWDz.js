import{a as g}from"./axios-B4uVmeYG.js";import{_ as w,r as n,n as D,o as A,d as r,m as o,q as _,v as k,F as z,u as E,t as M,y as h,x as T,b as u,z as F,A as L}from"./index-Ca4MJmB5.js";const q={name:"Cuentas",setup(){const c=n(""),t=n(""),d=n(""),e=n(""),v=n(""),i=n(""),a=n(""),y=D([]),C=D([]),b=D([]),l=n(""),m=n(""),P=n(!0),x=()=>{g.get("http://hogarsantaluisa.test/cuentas/getCrud").then(s=>{y.splice(0,y.length,...s.data)}).catch(()=>{l.value="Error al cargar las cuentas."})},U=()=>{g.get("http://hogarsantaluisa.test/clasificacion/get").then(s=>{C.splice(0,C.length,...s.data)}).catch(()=>{l.value="Error al cargar las clasificaciones."})},V=()=>{g.get("http://hogarsantaluisa.test/proyectos/get").then(s=>{b.splice(0,b.length,...s.data)}).catch(()=>{l.value="Error al cargar los tipos de proyecto."})},S=()=>{v.value&&g.get(`http://hogarsantaluisa.test/cuentas/getCrudCuentaName/${v.value}`).then(s=>{const p=s.data;c.value=p.cuenta,t.value=p.estado,d.value=p.codigo,i.value=p.id_clasificacion,a.value=p.id_proyectos,P.value=!1}).catch(()=>{l.value="Error al cargar los datos del proyecto."})},j=()=>{i.value&&g.get(`http://hogarsantaluisa.test/clasificacion/getTipo/${i.value}`).then(s=>{const p=s.data;e.value=p.tipo}).catch(()=>{l.value="Error al cargar los datos de clasificación."})},I=()=>{if(l.value="",m.value="",!c.value||!t.value||!d.value||!i.value||!a.value){l.value="Por favor, completa todos los campos.";return}const s={cuenta:c.value,estado:t.value,codigo:d.value,id_clasificacion:i.value,id_proyectos:a.value};g.post("http://hogarsantaluisa.test/cuentas/create",s).then(()=>{m.value="Cuenta guardada correctamente.",x()}).catch(()=>{l.value="Error al guardar la cuenta."})},N=()=>{if(!v.value){l.value="Por favor, selecciona una cuenta.";return}const s={};if(c.value.trim()!==""&&(s.cuenta=c.value),t.value.trim()!==""&&(s.estado=t.value.trim()),d.value.trim()!==""&&(s.codigo=d.value),i.value&&(s.id_clasificacion=i.value),a.value&&(s.id_proyectos=a.value),Object.keys(s).length===0){l.value="No hay campos para actualizar.";return}console.log("Datos a actualizar:",s),g.put(`http://hogarsantaluisa.test/cuentas/update/${v.value}`,s).then(()=>{m.value="Cuenta actualizada correctamente.",x()}).catch(()=>{l.value="Error al actualizar la cuenta."})},B=()=>{c.value="",t.value="",d.value="",i.value="",a.value="",v.value="",e.value="",l.value="",m.value="",P.value=!0};return A(()=>{x(),U(),V()}),{cuenta:c,estado:t,codigo:d,selectedClasificacion:i,selectedTipoProyecto:a,selectedProject:v,projects:y,clasificaciones:C,tiposProyecto:b,insertar:I,actualizar:N,limpiar:B,cargarDatosProyecto:S,tipo:e,cargarDatosClasificacion:j,cargarDatosTiposProyecto:V,errorMessage:l,successMessage:m,isDisabled:P}}},f=c=>(F("data-v-95235517"),c=c(),L(),c),G={class:"division-container"},O={class:"nombre-fecha-container"},H={class:"id-inputs"},J=f(()=>o("label",null,"Cuentas",-1)),K=["value"],Q={class:"nombre-inputs"},R=f(()=>o("label",null,"Cuentas",-1)),W={class:"numero-input"},X={class:"fecha-inputs"},Y=f(()=>o("label",null,"Estado",-1)),Z=["disabled"],$={class:"fecha-inputs"},aa=f(()=>o("label",null,"Código",-1)),ea={class:"id-inputs"},ta=f(()=>o("label",null,"Clasificación",-1)),oa=["value"],sa={class:"id-inputs"},la=f(()=>o("label",null,"Proyecto",-1)),ca=["value"],ia={key:0,class:"text-danger"},na={key:1,class:"text-success"},ra=f(()=>o("div",{style:{"margin-top":"20px"}},null,-1));function ua(c,t,d,e,v,i){return u(),r("div",null,[o("div",G,[o("div",O,[o("div",H,[J,_(o("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedProject=a),onChange:t[1]||(t[1]=(...a)=>e.cargarDatosProyecto&&e.cargarDatosProyecto(...a))},[(u(!0),r(z,null,E(e.projects,a=>(u(),r("option",{value:a.cuenta,key:a.cuenta},h(a.cuenta),9,K))),128))],544),[[k,e.selectedProject]])]),o("div",Q,[R,o("div",W,[_(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>e.cuenta=a)},null,512),[[M,e.cuenta]])])]),o("div",X,[Y,_(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>e.estado=a),disabled:e.isDisabled},null,8,Z),[[M,e.estado]])]),o("div",$,[aa,_(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>e.codigo=a)},null,512),[[M,e.codigo]])]),o("div",ea,[ta,_(o("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>e.selectedClasificacion=a),onChange:t[6]||(t[6]=(...a)=>e.cargarDatosClasificacion&&e.cargarDatosClasificacion(...a))},[(u(!0),r(z,null,E(e.clasificaciones,a=>(u(),r("option",{value:a.id,key:a.id},h(a.tipo),9,oa))),128))],544),[[k,e.selectedClasificacion]])]),o("div",sa,[la,_(o("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>e.selectedTipoProyecto=a)},[(u(!0),r(z,null,E(e.tiposProyecto,a=>(u(),r("option",{value:a.id,key:a.id},h(a.nombre),9,ca))),128))],512),[[k,e.selectedTipoProyecto]])])])]),e.errorMessage?(u(),r("p",ia,h(e.errorMessage),1)):T("",!0),e.successMessage?(u(),r("p",na,h(e.successMessage),1)):T("",!0),ra,o("button",{onClick:t[8]||(t[8]=(...a)=>e.insertar&&e.insertar(...a))},"Guardar"),o("button",{onClick:t[9]||(t[9]=(...a)=>e.actualizar&&e.actualizar(...a)),style:{"margin-left":"10px"}},"Actualizar"),o("button",{onClick:t[10]||(t[10]=(...a)=>e.limpiar&&e.limpiar(...a)),style:{"margin-left":"10px"}},"Limpiar")])}const pa=w(q,[["render",ua],["__scopeId","data-v-95235517"]]);export{pa as default};
