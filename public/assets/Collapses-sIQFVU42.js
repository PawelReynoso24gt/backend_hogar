import{a as T}from"./axios-B4uVmeYG.js";import{_ as h,r as c,d as E,m as l,q as A,v as f,F as N,u as M,t as g,b as v,y as L,z as P,A as U}from"./index-Ca4MJmB5.js";import{E as w}from"./jspdf.plugin.autotable-BZfwaWVG.js";const y={name:"ReporteAG",setup(){const i=c(""),r=c(""),m=c(""),o=c(""),_=c(""),S=["Mensual","Trimestral","Semestral","Anual"],t=c([]);return{contador:i,responsableAgricola:r,economaProvincial:m,selectedPeriodo:o,selectedMes:_,periodos:S,meses:t,limpiar:()=>{o.value="",_.value="",i.value="",r.value="",m.value=""},actualizarMeses:()=>{switch(o.value){case"Mensual":t.value=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];break;case"Trimestral":t.value=["Enero","Abril","Julio","Octubre"];break;case"Semestral":t.value=["Enero","Julio"];break;case"Anual":t.value=["Enero"],_.value="Enero";break}},generarPDF:async()=>{try{const n=(await T.post("http://hogarsantaluisa.test/in_eg/reporteFinalAG",{tipo:o.value.toLowerCase(),mes:_.value.toLowerCase(),contador:i.value,responsable:r.value,economa:m.value})).data,e=new w;let s=20;const C=e.internal.pageSize.height,D=20,d=()=>{s>C-D&&(e.addPage(),s=20)},le=(a,b,_e)=>{d(),e.text(a,b,s),s+=10},I=(a,b)=>{e.autoTable({head:[a],body:b,startY:s,theme:"grid",styles:{cellPadding:2.5,fontSize:8,halign:"center",valign:"middle",overflow:"linebreak"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]}}),s=e.autoTable.previous.finalY+10},R=new Date().getFullYear(),ne=new Date().toLocaleDateString("es-ES",{month:"long"});let p;o.value==="Mensual"?p=`RESUMEN DE ${_.value.toUpperCase()}`:o.value==="Trimestral"?p=`RESUMEN ${{Enero:"PRIMER TRIMESTRE",Abril:"SEGUNDO TRIMESTRE",Julio:"TERCER TRIMESTRE",Octubre:"CUARTO TRIMESTRE"}[_.value]||""}`:o.value==="Semestral"?p=_.value==="Enero"?"RESUMEN PRIMER SEMESTRE":"RESUMEN SEGUNDO SEMESTRE":o.value==="Anual"&&(p="RESUMEN ANUAL"),e.setFontSize(16),e.text(`REPORTE FINAL ${o.value.toUpperCase()} ${R}`,105,27,{align:"center"}),e.setLineWidth(.5),e.line(60,32,150,32),e.setFontSize(12),s=40,e.text("INFORME CORRESPONDIENTE AL",20,40),e.text(p,91,40),e.text("DE",165,40),e.text(`${R}`,175,40),e.text("PROYECTO AGRÍCOLA HOGAR SANTA LUISA",20,50),e.text("LUGAR:",130,50),e.text("QUETZALTENANGO",155,50),e.text("GUATEMALA",20,60),e.text("FECHA:",130,60),e.text(new Date().toLocaleDateString("es-ES"),160,60),s=75;const O=[["SALDO INICIAL","","","Q "+n.saldo_inicial.toFixed(2)],["SALDO INICIAL EN CAJA GENERAL","","Q "+n.saldo_inicial_caja.toFixed(2),""],["SALDO INICIAL EN BANCO","","Q "+n.saldo_inicial_bancos.toFixed(2),""],["INGRESOS","","","Q "+n.total_general_ingresos.toFixed(2)],["CAJA GENERAL","","Q "+n.total_ingresos_caja.toFixed(2),""],...n.data_caja.filter(a=>a.ingresos&&parseFloat(a.ingresos)>0).map(a=>[a.cuenta,"Q "+a.ingresos,"",""]),["BANCO","","Q "+n.total_ingresos_bancos.toFixed(2),""],...n.data_bancos.filter(a=>a.ingresos&&parseFloat(a.ingresos)>0).map(a=>[a.cuenta,"Q "+a.ingresos,"",""]),["EGRESOS","","","Q "+n.total_general_egresos.toFixed(2)],["CAJA GENERAL","","Q "+n.total_egresos_caja.toFixed(2),""],...n.data_caja.filter(a=>a.egresos&&parseFloat(a.egresos)>0).map(a=>[a.cuenta,"Q "+a.egresos,"",""]),["BANCO","","Q "+n.total_egresos_bancos.toFixed(2),""],...n.data_bancos.filter(a=>a.egresos&&parseFloat(a.egresos)>0).map(a=>[a.cuenta,"Q "+a.egresos,"",""]),["SALDO FINAL","","","Q "+n.total_saldo_final.toFixed(2)],["SALDO FINAL EN CAJA GENERAL","","Q "+n.total_saldo_final_caja.toFixed(2),""],["SALDO FINAL EN BANCO","","Q "+n.total_saldo_final_bancos.toFixed(2),""],["SUMAS IGUALES","","Q "+n.total_saldo_final.toFixed(2),"Q "+n.total_saldo_final.toFixed(2)]];I(["Descripción","Detalle","Saldo suma","Suma"],O),s+=5,e.setFontSize(10),d(),e.text("Hecho por:",20,s),e.text("Revisado por:",140,s),s+=15,d(),e.text("(f)_____________________________",20,s),e.text("(f)_____________________________",120,s),s+=5,d(),e.text(n.contador,25,s),e.text("Contador",40,s+5),e.text("Vo.Bo. "+n.responsable,125,s),e.text("Responsable de Proyecto Agricola",125,s+5),s+=40,d(),e.text("(f)__________________________________",65,s),s+=4,d(),e.text(n.economa,75,s),e.text("Economa provincial",85,s+5);const F=await(await window.showSaveFilePicker({suggestedName:"Reporte_ingresos_egresos_agricola.pdf",types:[{description:"PDF Files",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await F.write(e.output("blob")),await F.close()}catch(x){console.error("Error al generar el PDF:",x)}}}}},u=i=>(P("data-v-2c28ba8b"),i=i(),U(),i),Q={class:"division-container"},G={class:"nombre-fecha-container"},k={class:"id-inputs"},z=u(()=>l("label",null,"Período de informe",-1)),J=["value"],B=u(()=>l("label",null,"Mes",-1)),V=["value"],j={class:"nombre-inputs"},H=u(()=>l("label",null,"Contador",-1)),Y={class:"numero-input"},W={class:"nombre-inputs"},q=u(()=>l("label",null,"Responsable de proyecto Agrícola",-1)),Z={class:"numero-input"},K={class:"nombre-inputs"},X=u(()=>l("label",null,"Economa provincial",-1)),$={class:"numero-input"},ee=u(()=>l("div",{style:{"margin-top":"20px"}},null,-1));function te(i,r,m,o,_,S){return v(),E("div",null,[l("div",Q,[l("div",G,[l("div",k,[z,A(l("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>o.selectedPeriodo=t),onChange:r[1]||(r[1]=(...t)=>o.actualizarMeses&&o.actualizarMeses(...t))},[(v(!0),E(N,null,M(o.periodos,t=>(v(),E("option",{key:t,value:t},L(t),9,J))),128))],544),[[f,o.selectedPeriodo]]),B,A(l("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>o.selectedMes=t)},[(v(!0),E(N,null,M(o.meses,t=>(v(),E("option",{key:t,value:t},L(t),9,V))),128))],512),[[f,o.selectedMes]])]),l("div",j,[H,l("div",Y,[A(l("input",{type:"text","onUpdate:modelValue":r[3]||(r[3]=t=>o.contador=t)},null,512),[[g,o.contador]])])]),l("div",W,[q,l("div",Z,[A(l("input",{type:"text","onUpdate:modelValue":r[4]||(r[4]=t=>o.responsableAgricola=t)},null,512),[[g,o.responsableAgricola]])])]),l("div",K,[X,l("div",$,[A(l("input",{type:"text","onUpdate:modelValue":r[5]||(r[5]=t=>o.economaProvincial=t)},null,512),[[g,o.economaProvincial]])])])])]),ee,l("button",{onClick:r[6]||(r[6]=(...t)=>o.generarPDF&&o.generarPDF(...t))},"Generar PDF"),l("button",{onClick:r[7]||(r[7]=(...t)=>o.limpiar&&o.limpiar(...t)),style:{"margin-left":"10px"}},"Limpiar")])}const pe=h(y,[["render",te],["__scopeId","data-v-2c28ba8b"]]);export{pe as default};
