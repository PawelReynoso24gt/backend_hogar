import{_ as N,r,n as w,g as O,o as K,d as p,m as t,q as _,t as y,v as R,F as T,u as W,b,y as z,z as k,A as L}from"./index-Dv1Q5dJW.js";import{E as g}from"./jspdf.plugin.autotable-UDwUbEO_.js";import{a as F}from"./axios-B4uVmeYG.js";import{F as U}from"./FileSaver.min-00UMhEch.js";const V={name:"Accordion",setup(){const l=r(""),n=r(""),h=r("PROYECTO AGRÍCOLA"),c=r("Dirección del Proyecto"),s=w([]),u=r(""),e=()=>{F.get("http://hogarsantaluisa.test/cuentasB/getConcatenada").then(i=>{s.splice(0,s.length,...i.data)}).catch(i=>{console.error(i)})},m=O(()=>s.find(i=>i.cuenta_bancaria===u.value)),f=i=>typeof i=="number"?i.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):i,C=async()=>{try{const S=(await F.post("http://hogarsantaluisa.test/in_eg/fechaBanco",{fechaInicial:l.value,fechaFinal:n.value,banco_y_cuenta:u.value})).data,o=new g("landscape");o.setFontSize(16),o.text(h.value,148.5,27,{align:"center"}),o.rect(60,17,170,15),o.setFontSize(12),o.text(`Dirección del Proyecto: ${c.value}`,20,40);const B="REPORTE: LIBRO BANCOS";o.setFontSize(10),o.text(B,20,50);const x=`ESPECIFICACIÓN: Desde: ${l.value}, Hasta: ${n.value}`;o.text(x,20,60);const D=`CUENTA BANCARIA: ${m.value?m.value.banco_y_cuenta:""}`;o.text(D,20,70);const I=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],A=S.map(a=>{const v=a.total?`Q. ${f(parseFloat(a.total))}`:"";return a.cuenta==="Saldo inicial"||a.cuenta==="Suma total bancos"?{nomenclatura:a.nomenclatura,fecha:a.fecha||"",cuenta:a.cuenta,descripcion:a.descripcion,acredita:"",debita:"",total:{content:v,styles:{fontStyle:"bold"}}}:{nomenclatura:a.nomenclatura,fecha:a.fecha,cuenta:a.cuenta,descripcion:a.descripcion,acredita:a.acredita?`Q. ${f(parseFloat(a.acredita))}`:"",debita:a.debita?`Q. ${f(parseFloat(a.debita))}`:"",total:v}});o.autoTable({columns:I,body:A,startY:80,theme:"grid",styles:{cellPadding:3,fontSize:8,halign:"left",valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:20,overflow:"visible",halign:"left"},fecha:{minCellWidth:20,overflow:"visible",halign:"left"},cuenta:{minCellWidth:40,overflow:"linebreak",halign:"left"},descripcion:{minCellWidth:40,overflow:"linebreak",halign:"left"},acredita:{minCellWidth:20,halign:"right"},debita:{minCellWidth:20,halign:"right"},total:{minCellWidth:20,halign:"right"}}});const P=o.output("blob");U.saveAs(P,"libro_bancos_agrícola.pdf")}catch(i){console.error("Error al generar el PDF:",i)}};return K(()=>{e()}),{fechaInicial:l,fechaFinal:n,nombreEncabezado:h,direccionProyecto:c,generarPDF:C,cargarBancosNoCuenta:e,cuentaBName:u,cuentas_bancarias:s,cuentaBancariaSeleccionada:m}}},d=l=>(k("data-v-e2bcfe85"),l=l(),L(),l),G=d(()=>t("label",null,"LIBRO DE BANCOS",-1)),M={class:"division-container"},Q={class:"numero-fecha-container"},Y={class:"fecha-inputs"},$=d(()=>t("label",null,"Fecha Inicial",-1)),q={class:"fecha-inputs"},H=d(()=>t("label",null,"Fecha Final",-1)),j={class:"division-container"},J={class:"numero-fecha-container"},X={class:"numero-inputs"},Z=d(()=>t("label",null,"Cuenta bancaria:",-1)),E=["value"],aa=d(()=>t("div",{style:{"margin-top":"20px"}},null,-1));function ta(l,n,h,c,s,u){return b(),p("div",null,[G,t("div",M,[t("div",Q,[t("div",Y,[$,_(t("input",{type:"date","onUpdate:modelValue":n[0]||(n[0]=e=>c.fechaInicial=e)},null,512),[[y,c.fechaInicial]])]),t("div",q,[H,_(t("input",{type:"date","onUpdate:modelValue":n[1]||(n[1]=e=>c.fechaFinal=e)},null,512),[[y,c.fechaFinal]])])])]),t("div",j,[t("div",J,[t("div",X,[Z,_(t("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>c.cuentaBName=e)},[(b(!0),p(T,null,W(c.cuentas_bancarias,e=>(b(),p("option",{value:e.cuenta_bancaria},z(e.banco_y_cuenta),9,E))),256))],512),[[R,c.cuentaBName]])])])]),aa,t("button",{onClick:n[3]||(n[3]=(...e)=>c.generarPDF&&c.generarPDF(...e))},"Generar PDF")])}const oa=N(V,[["render",ta],["__scopeId","data-v-e2bcfe85"]]);export{oa as default};
