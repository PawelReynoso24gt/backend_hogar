import{a as O}from"./axios-B4uVmeYG.js";import{_ as h,r as d,d as p,m as l,q as E,v as R,F as N,u as L,t as S,b as v,y as M,z as P,A as U}from"./index-Dv1Q5dJW.js";import{E as Q}from"./jspdf.plugin.autotable-UDwUbEO_.js";import{F as y}from"./FileSaver.min-00UMhEch.js";const G={name:"ReporteAG",setup(){const r=d(""),i=d(""),m=d(""),a=d(""),_=d(""),b=["Mensual","Trimestral","Semestral","Anual"],t=d([]);return{responsable:r,hermanaSirviente:i,economaProvincial:m,selectedPeriodo:a,selectedMes:_,periodos:b,meses:t,limpiar:()=>{a.value="",_.value="",r.value="",i.value="",m.value=""},actualizarMeses:()=>{switch(a.value){case"Mensual":t.value=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];break;case"Trimestral":t.value=["Enero","Abril","Julio","Octubre"];break;case"Semestral":t.value=["Enero","Julio"];break;case"Anual":t.value=["Enero"],_.value="Enero";break}},generarPDF:async()=>{try{const n=(await O.post("http://hogarsantaluisa.test/in_eg/reporteFinalCA",{tipo:a.value.toLowerCase(),mes:_.value.toLowerCase(),responsable:r.value,sirviente:i.value,economa:m.value})).data,e=new Q;let s=20;const g=e.internal.pageSize.height,f=20,I=()=>{s>g-f&&(e.addPage(),s=20)},ne=(o,A,de)=>{I(),e.text(o,A,s),s+=10},C=(o,A)=>{e.autoTable({head:[o],body:A,startY:s,theme:"grid",styles:{cellPadding:2.5,fontSize:8,halign:"center",valign:"middle",overflow:"linebreak"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]}}),s=e.autoTable.previous.finalY+10},F=new Date().getFullYear(),ie=new Date().toLocaleDateString("es-ES",{month:"long"});let u;a.value==="Mensual"?u=`RESUMEN DE ${_.value.toUpperCase()}`:a.value==="Trimestral"?u=`RESUMEN ${{Enero:"PRIMER TRIMESTRE",Abril:"SEGUNDO TRIMESTRE",Julio:"TERCER TRIMESTRE",Octubre:"CUARTO TRIMESTRE"}[_.value]||""}`:a.value==="Semestral"?u=_.value==="Enero"?"RESUMEN PRIMER SEMESTRE":"RESUMEN SEGUNDO SEMESTRE":a.value==="Anual"&&(u="RESUMEN ANUAL"),e.setFontSize(16),e.text(`REPORTE FINAL ${a.value.toUpperCase()} ${F}`,105,27,{align:"center"}),e.setLineWidth(.5),e.line(60,32,150,32),e.setFontSize(12),s=40,e.text("INFORME CORRESPONDIENTE AL",20,40),e.text(u,91,40),e.text("DE",165,40),e.text(`${F}`,175,40),e.text("PROYECTO CAPILLA HOGAR SANTA LUISA",20,50),e.text("LUGAR:",130,50),e.text("QUETZALTENANGO",155,50),e.text("GUATEMALA",20,60),e.text("FECHA:",130,60),e.text(new Date().toLocaleDateString("es-ES"),160,60),s=75;const D=[["SALDO INICIAL","","","Q "+n.saldo_inicial.toFixed(2)],["SALDO INICIAL EN CAJA GENERAL","","Q "+n.saldo_inicial_caja.toFixed(2),""],["SALDO INICIAL EN BANCO","","Q "+n.saldo_inicial_bancos.toFixed(2),""],["INGRESOS","","","Q "+n.total_general_ingresos.toFixed(2)],["CAJA GENERAL","","Q "+n.total_ingresos_caja.toFixed(2),""],...n.data_caja.filter(o=>o.ingresos&&parseFloat(o.ingresos)>0).map(o=>[o.cuenta,"Q "+o.ingresos,"",""]),["BANCO","","Q "+n.total_ingresos_bancos.toFixed(2),""],...n.data_bancos.filter(o=>o.ingresos&&parseFloat(o.ingresos)>0).map(o=>[o.cuenta,"Q "+o.ingresos,"",""]),["EGRESOS","","","Q "+n.total_general_egresos.toFixed(2)],["CAJA GENERAL","","Q "+n.total_egresos_caja.toFixed(2),""],...n.data_caja.filter(o=>o.egresos&&parseFloat(o.egresos)>0).map(o=>[o.cuenta,"Q "+o.egresos,"",""]),["BANCO","","Q "+n.total_egresos_bancos.toFixed(2),""],...n.data_bancos.filter(o=>o.egresos&&parseFloat(o.egresos)>0).map(o=>[o.cuenta,"Q "+o.egresos,"",""]),["SALDO FINAL","","","Q "+n.total_saldo_final.toFixed(2)],["SALDO FINAL EN CAJA GENERAL","","Q "+n.total_saldo_final_caja.toFixed(2),""],["SALDO FINAL EN BANCO","","Q "+n.total_saldo_final_bancos.toFixed(2),""],["SUMAS IGUALES","","Q "+n.total_saldo_final.toFixed(2),"Q "+n.total_saldo_final.toFixed(2)]];C(["Descripción","Detalle","Saldo suma","Suma"],D),s+=5,e.setFontSize(10),s+60>g-f&&(e.addPage(),s=20),e.text("Hecho por:",20,s),e.text("Revisado por:",140,s),s+=15,e.text("(f)_____________________________",20,s),e.text("(f)_____________________________",120,s),s+=5,e.text(n.responsable,25,s),e.text("Responsable de Capilla",30,s+5),e.text("Vo.Bo. "+n.sirviente,130,s),e.text("Hermana Sirviente",135,s+5),s+=40,e.text("(f)__________________________________",65,s),s+=4,e.text(n.economa,75,s),e.text("Economa Provincial",85,s+5);const T=e.output("blob");y.saveAs(T,"informe_final_capilla.pdf")}catch(x){console.error("Error al generar el PDF:",x)}}}}},c=r=>(P("data-v-ff230e41"),r=r(),U(),r),k={class:"division-container"},w={class:"nombre-fecha-container"},z={class:"id-inputs"},J=c(()=>l("label",null,"Período de informe",-1)),B=["value"],H=c(()=>l("label",null,"Mes",-1)),V=["value"],j={class:"nombre-inputs"},Y=c(()=>l("label",null,"Responsable de Capilla",-1)),q={class:"numero-input"},W={class:"nombre-inputs"},Z=c(()=>l("label",null,"Hermana Sirviente",-1)),K={class:"numero-input"},X={class:"nombre-inputs"},$=c(()=>l("label",null,"Economa provincial",-1)),ee={class:"numero-input"},te=c(()=>l("div",{style:{"margin-top":"20px"}},null,-1));function ae(r,i,m,a,_,b){return v(),p("div",null,[l("div",k,[l("div",w,[l("div",z,[J,E(l("select",{"onUpdate:modelValue":i[0]||(i[0]=t=>a.selectedPeriodo=t),onChange:i[1]||(i[1]=(...t)=>a.actualizarMeses&&a.actualizarMeses(...t))},[(v(!0),p(N,null,L(a.periodos,t=>(v(),p("option",{key:t,value:t},M(t),9,B))),128))],544),[[R,a.selectedPeriodo]]),H,E(l("select",{"onUpdate:modelValue":i[2]||(i[2]=t=>a.selectedMes=t)},[(v(!0),p(N,null,L(a.meses,t=>(v(),p("option",{key:t,value:t},M(t),9,V))),128))],512),[[R,a.selectedMes]])]),l("div",j,[Y,l("div",q,[E(l("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=t=>a.responsable=t)},null,512),[[S,a.responsable]])])]),l("div",W,[Z,l("div",K,[E(l("input",{type:"text","onUpdate:modelValue":i[4]||(i[4]=t=>a.hermanaSirviente=t)},null,512),[[S,a.hermanaSirviente]])])]),l("div",X,[$,l("div",ee,[E(l("input",{type:"text","onUpdate:modelValue":i[5]||(i[5]=t=>a.economaProvincial=t)},null,512),[[S,a.economaProvincial]])])])])]),te,l("button",{onClick:i[6]||(i[6]=(...t)=>a.generarPDF&&a.generarPDF(...t))},"Generar PDF"),l("button",{onClick:i[7]||(i[7]=(...t)=>a.limpiar&&a.limpiar(...t)),style:{"margin-left":"10px"}},"Limpiar")])}const ve=h(G,[["render",ae],["__scopeId","data-v-ff230e41"]]);export{ve as default};
