import{a as T}from"./axios-B4uVmeYG.js";import{_ as P,r as c,d as p,m as l,q as A,v as R,F,u as N,t as b,b as m,y as M,z as U,A as h}from"./index-Dv1Q5dJW.js";import{E as y}from"./jspdf.plugin.autotable-UDwUbEO_.js";import{F as Q}from"./FileSaver.min-00UMhEch.js";const G={name:"ReporteAG",setup(){const i=c(""),r=c(""),v=c(""),o=c(""),_=c(""),g=["Mensual","Trimestral","Semestral","Anual"],t=c([]);return{contador:i,responsableAgricola:r,economaProvincial:v,selectedPeriodo:o,selectedMes:_,periodos:g,meses:t,limpiar:()=>{o.value="",_.value="",i.value="",r.value="",v.value=""},actualizarMeses:()=>{switch(o.value){case"Mensual":t.value=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];break;case"Trimestral":t.value=["Enero","Abril","Julio","Octubre"];break;case"Semestral":t.value=["Enero","Julio"];break;case"Anual":t.value=["Enero"],_.value="Enero";break}},generarPDF:async()=>{try{const n=(await T.post("http://hogarsantaluisa.test/in_eg/reporteFinalAG",{tipo:o.value.toLowerCase(),mes:_.value.toLowerCase(),contador:i.value,responsable:r.value,economa:v.value})).data,e=new y;let s=20;const L=e.internal.pageSize.height,C=20,d=()=>{s>L-C&&(e.addPage(),s=20)},ne=(a,S,_e)=>{d(),e.text(a,S,s),s+=10},I=(a,S)=>{e.autoTable({head:[a],body:S,startY:s,theme:"grid",styles:{cellPadding:2.5,fontSize:8,halign:"center",valign:"middle",overflow:"linebreak"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]}}),s=e.autoTable.previous.finalY+10},f=new Date().getFullYear(),re=new Date().toLocaleDateString("es-ES",{month:"long"});let E;o.value==="Mensual"?E=`RESUMEN DE ${_.value.toUpperCase()}`:o.value==="Trimestral"?E=`RESUMEN ${{Enero:"PRIMER TRIMESTRE",Abril:"SEGUNDO TRIMESTRE",Julio:"TERCER TRIMESTRE",Octubre:"CUARTO TRIMESTRE"}[_.value]||""}`:o.value==="Semestral"?E=_.value==="Enero"?"RESUMEN PRIMER SEMESTRE":"RESUMEN SEGUNDO SEMESTRE":o.value==="Anual"&&(E="RESUMEN ANUAL"),e.setFontSize(16),e.text(`REPORTE FINAL ${o.value.toUpperCase()} ${f}`,105,27,{align:"center"}),e.setLineWidth(.5),e.line(60,32,150,32),e.setFontSize(12),s=40,e.text("INFORME CORRESPONDIENTE AL",20,40),e.text(E,91,40),e.text("DE",165,40),e.text(`${f}`,175,40),e.text("PROYECTO AGRÍCOLA HOGAR SANTA LUISA",20,50),e.text("LUGAR:",130,50),e.text("QUETZALTENANGO",155,50),e.text("GUATEMALA",20,60),e.text("FECHA:",130,60),e.text(new Date().toLocaleDateString("es-ES"),160,60),s=75;const D=[["SALDO INICIAL","","","Q "+n.saldo_inicial.toFixed(2)],["SALDO INICIAL EN CAJA GENERAL","","Q "+n.saldo_inicial_caja.toFixed(2),""],["SALDO INICIAL EN BANCO","","Q "+n.saldo_inicial_bancos.toFixed(2),""],["INGRESOS","","","Q "+n.total_general_ingresos.toFixed(2)],["CAJA GENERAL","","Q "+n.total_ingresos_caja.toFixed(2),""],...n.data_caja.filter(a=>a.ingresos&&parseFloat(a.ingresos)>0).map(a=>[a.cuenta,"Q "+a.ingresos,"",""]),["BANCO","","Q "+n.total_ingresos_bancos.toFixed(2),""],...n.data_bancos.filter(a=>a.ingresos&&parseFloat(a.ingresos)>0).map(a=>[a.cuenta,"Q "+a.ingresos,"",""]),["EGRESOS","","","Q "+n.total_general_egresos.toFixed(2)],["CAJA GENERAL","","Q "+n.total_egresos_caja.toFixed(2),""],...n.data_caja.filter(a=>a.egresos&&parseFloat(a.egresos)>0).map(a=>[a.cuenta,"Q "+a.egresos,"",""]),["BANCO","","Q "+n.total_egresos_bancos.toFixed(2),""],...n.data_bancos.filter(a=>a.egresos&&parseFloat(a.egresos)>0).map(a=>[a.cuenta,"Q "+a.egresos,"",""]),["SALDO FINAL","","","Q "+n.total_saldo_final.toFixed(2)],["SALDO FINAL EN CAJA GENERAL","","Q "+n.total_saldo_final_caja.toFixed(2),""],["SALDO FINAL EN BANCO","","Q "+n.total_saldo_final_bancos.toFixed(2),""],["SUMAS IGUALES","","Q "+n.total_saldo_final.toFixed(2),"Q "+n.total_saldo_final.toFixed(2)]];I(["Descripción","Detalle","Saldo suma","Suma"],D),s+=5,e.setFontSize(10),d(),e.text("Hecho por:",20,s),e.text("Revisado por:",140,s),s+=15,d(),e.text("(f)_____________________________",20,s),e.text("(f)_____________________________",120,s),s+=5,d(),e.text(n.contador,25,s),e.text("Contador",40,s+5),e.text("Vo.Bo. "+n.responsable,125,s),e.text("Responsable de Proyecto Agricola",125,s+5),s+=40,d(),e.text("(f)__________________________________",65,s),s+=4,d(),e.text(n.economa,75,s),e.text("Economa provincial",85,s+5);const O=e.output("blob");Q.saveAs(O,"reporte_final_agrícola.pdf")}catch(x){console.error("Error al generar el PDF:",x)}}}}},u=i=>(U("data-v-dfeea769"),i=i(),h(),i),k={class:"division-container"},w={class:"nombre-fecha-container"},z={class:"id-inputs"},J=u(()=>l("label",null,"Período de informe",-1)),B=["value"],V=u(()=>l("label",null,"Mes",-1)),j=["value"],H={class:"nombre-inputs"},Y=u(()=>l("label",null,"Contador",-1)),q={class:"numero-input"},W={class:"nombre-inputs"},Z=u(()=>l("label",null,"Responsable de proyecto Agrícola",-1)),K={class:"numero-input"},X={class:"nombre-inputs"},$=u(()=>l("label",null,"Economa provincial",-1)),ee={class:"numero-input"},te=u(()=>l("div",{style:{"margin-top":"20px"}},null,-1));function oe(i,r,v,o,_,g){return m(),p("div",null,[l("div",k,[l("div",w,[l("div",z,[J,A(l("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>o.selectedPeriodo=t),onChange:r[1]||(r[1]=(...t)=>o.actualizarMeses&&o.actualizarMeses(...t))},[(m(!0),p(F,null,N(o.periodos,t=>(m(),p("option",{key:t,value:t},M(t),9,B))),128))],544),[[R,o.selectedPeriodo]]),V,A(l("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>o.selectedMes=t)},[(m(!0),p(F,null,N(o.meses,t=>(m(),p("option",{key:t,value:t},M(t),9,j))),128))],512),[[R,o.selectedMes]])]),l("div",H,[Y,l("div",q,[A(l("input",{type:"text","onUpdate:modelValue":r[3]||(r[3]=t=>o.contador=t)},null,512),[[b,o.contador]])])]),l("div",W,[Z,l("div",K,[A(l("input",{type:"text","onUpdate:modelValue":r[4]||(r[4]=t=>o.responsableAgricola=t)},null,512),[[b,o.responsableAgricola]])])]),l("div",X,[$,l("div",ee,[A(l("input",{type:"text","onUpdate:modelValue":r[5]||(r[5]=t=>o.economaProvincial=t)},null,512),[[b,o.economaProvincial]])])])])]),te,l("button",{onClick:r[6]||(r[6]=(...t)=>o.generarPDF&&o.generarPDF(...t))},"Generar PDF"),l("button",{onClick:r[7]||(r[7]=(...t)=>o.limpiar&&o.limpiar(...t)),style:{"margin-left":"10px"}},"Limpiar")])}const pe=P(G,[["render",oe],["__scopeId","data-v-dfeea769"]]);export{pe as default};
