import{a as d}from"./axios-B4uVmeYG.js";import{_ as N,r as l,n as y,o as P,d as c,m as s,q as p,v as C,F as x,u as k,t as B,y as g,x as M,b as u,z as j,A as I}from"./index-Dv1Q5dJW.js";const U={name:"Cuentas",setup(){const o=l(""),t=l(""),r=l(""),e=l(""),m=y([]),_=y([]),a=l(""),i=l(""),b=l(!0),h=()=>{d.get("http://hogarsantaluisa.test/cuentasB/get").then(n=>{m.splice(0,m.length,...n.data)}).catch(()=>{a.value="Error al cargar las cuentas bancarias."})},z=()=>{d.get("http://hogarsantaluisa.test/bancos/get").then(n=>{_.splice(0,_.length,...n.data)}).catch(()=>{a.value="Error al cargar los bancos."})},D=()=>{e.value&&d.get(`http://hogarsantaluisa.test/cuentasB/cuentas_bancarias/${e.value}`).then(n=>{const f=n.data;o.value=f.numero_cuenta,t.value=f.estado.toString(),r.value=f.banco,b.value=!1}).catch(()=>{a.value="Error al cargar los datos de la cuenta."})},E=()=>{if(a.value="",i.value="",!o.value||!r.value){a.value="Por favor, completa todos los campos.";return}const n={numero_cuenta:o.value,banco:r.value,estado:t.value.trim()!==""?t.value.trim():"1"};d.post("http://hogarsantaluisa.test/cuentasB/create",n).then(()=>{i.value="Cuenta bancaria guardada correctamente.",h()}).catch(()=>{a.value="Error al guardar la cuenta bancaria."})},S=()=>{if(a.value="",i.value="",!e.value){a.value="Por favor, selecciona una cuenta bancaria.";return}const n={};if(o.value.trim()!==""&&(n.numero_cuenta=o.value),typeof t.value=="string"&&t.value.trim()!==""&&(n.estado=t.value.trim()),r.value.trim()!==""&&(n.banco=r.value),Object.keys(n).length===0){a.value="No hay campos para actualizar.";return}d.put(`http://hogarsantaluisa.test/cuentasB/update/${e.value}`,n).then(()=>{i.value="Cuenta bancaria actualizada correctamente.",h()}).catch(()=>{a.value="Error al actualizar la cuenta bancaria."})},V=()=>{o.value="",t.value="",r.value="",e.value="",a.value="",i.value="",b.value=!0};return P(()=>{h(),z()}),{numero_cuenta:o,estado:t,banco:r,selectedProject:e,projects:m,bancos:_,insertar:E,actualizar:S,limpiar:V,cargarDatosCuenta:D,errorMessage:a,successMessage:i,isDisabled:b}}},v=o=>(j("data-v-f9c17d12"),o=o(),I(),o),w={class:"division-container"},A={class:"nombre-fecha-container"},F={class:"id-inputs"},L=v(()=>s("label",null,"Cuentas Bancarias",-1)),q=["value"],G={class:"fecha-inputs"},O=v(()=>s("label",null,"Numero de Cuenta",-1)),T={class:"fecha-inputs"},H=v(()=>s("label",null,"Estado",-1)),J=["disabled"],K={class:"nombre-inputs"},Q=v(()=>s("label",null,"Bancos a asignar/editar",-1)),R={class:"numero-input"},W=["value"],X={key:0,class:"text-danger"},Y={key:1,class:"text-success"},Z=v(()=>s("div",{style:{"margin-top":"20px"}},null,-1));function $(o,t,r,e,m,_){return u(),c("div",null,[s("div",w,[s("div",A,[s("div",F,[L,p(s("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedProject=a),onChange:t[1]||(t[1]=(...a)=>e.cargarDatosCuenta&&e.cargarDatosCuenta(...a))},[(u(!0),c(x,null,k(e.projects,a=>(u(),c("option",{key:a.id_cuentas_bancarias,value:a.numero_cuenta},g(a.numero_cuenta),9,q))),128))],544),[[C,e.selectedProject]])]),s("div",G,[O,p(s("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>e.numero_cuenta=a)},null,512),[[B,e.numero_cuenta]])]),s("div",T,[H,p(s("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>e.estado=a),disabled:e.isDisabled},null,8,J),[[B,e.estado]])]),s("div",K,[Q,s("div",R,[p(s("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.banco=a)},[(u(!0),c(x,null,k(e.bancos,a=>(u(),c("option",{key:a.id,value:a.banco},g(a.banco),9,W))),128))],512),[[C,e.banco]])])])])]),e.errorMessage?(u(),c("p",X,g(e.errorMessage),1)):M("",!0),e.successMessage?(u(),c("p",Y,g(e.successMessage),1)):M("",!0),Z,s("button",{onClick:t[5]||(t[5]=(...a)=>e.insertar&&e.insertar(...a))},"Guardar"),s("button",{onClick:t[6]||(t[6]=(...a)=>e.actualizar&&e.actualizar(...a)),style:{"margin-left":"10px"}},"Actualizar"),s("button",{onClick:t[7]||(t[7]=(...a)=>e.limpiar&&e.limpiar(...a)),style:{"margin-left":"10px"}},"Limpiar")])}const ta=N(U,[["render",$],["__scopeId","data-v-f9c17d12"]]);export{ta as default};
