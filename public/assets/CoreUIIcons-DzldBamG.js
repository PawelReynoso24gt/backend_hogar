import{_ as C,r as d,d as w,m as e,q as p,t as m,b as I,z as S,A as D}from"./index-Ca4MJmB5.js";import{E as x}from"./jspdf.plugin.autotable-BZfwaWVG.js";import{a as P}from"./axios-B4uVmeYG.js";const A={name:"Accordion",setup(){const c=d(""),i=d(""),s=d("PROYECTO AGRÍCOLA"),n=d("8va calle 5-21 zona 10, Quetzaltenango"),h=async()=>{try{const b=(await P.post("http://hogarsantaluisa.test/in_eg/fecha",{fechaInicial:c.value,fechaFinal:i.value})).data,l=new x({orientation:"landscape"});l.setFontSize(16),l.text(s.value,148.5,27,{align:"center"}),l.rect(60,17,170,15),l.setFontSize(12),l.text(`Dirección del Proyecto: ${n.value}`,20,40);const F="REPORTE: LIBRO CAJA";l.setFontSize(10),l.text(F,20,50);const v=`ESPECIFICACIÓN: Desde: ${c.value}, Hasta: ${i.value}`;l.text(v,20,60);const _=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],y=b.map(t=>{const f=t.total?`Q. ${o(parseFloat(t.total))}`:"";return t.cuenta==="Saldo inicial"||t.cuenta==="Suma total Caja"?{nomenclatura:t.nomenclatura,fecha:t.fecha||"",cuenta:t.cuenta,descripcion:t.descripcion,acredita:"",debita:"",total:{content:f,styles:{fontStyle:"bold"}},borderBottom:{width:4,color:[0,0,0],double:!0}}:{nomenclatura:t.nomenclatura,fecha:t.fecha,cuenta:t.cuenta,descripcion:t.descripcion,acredita:t.acredita?`Q. ${o(parseFloat(t.acredita))}`:"",debita:t.debita?`Q. ${o(parseFloat(t.debita))}`:"",total:f}});l.autoTable({columns:_,body:y,startY:65,theme:"grid",styles:{cellPadding:2.5,fontSize:7,halign:"center",valign:"middle",overflow:"linebreak"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:30,halign:"left",overflow:"visible"},fecha:{minCellWidth:30,halign:"left",overflow:"visible"},descripcion:{minCellWidth:50,halign:"left",overflow:"linebreak"},cuenta:{minCellWidth:50,halign:"left",overflow:"linebreak"},acredita:{minCellWidth:30,halign:"right"},debita:{minCellWidth:30,halign:"right"},total:{minCellWidth:40,halign:"right"}},tableWidth:"auto",margin:{left:10,right:10}});const u=await(await window.showSaveFilePicker({suggestedName:"libro_caja_agricola.pdf",types:[{description:"PDF Files",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await u.write(l.output("blob")),await u.close()}catch(a){console.error("Error al generar el PDF:",a)}},o=a=>typeof a=="number"?a.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):a;return{fechaInicial:c,fechaFinal:i,nombreEncabezado:s,direccionProyecto:n,generarPDF:h}}},r=c=>(S("data-v-6de0719d"),c=c(),D(),c),W=r(()=>e("label",null,"LIBRO DE CAJA",-1)),z={class:"division-container"},k={class:"numero-fecha-container"},K={class:"fecha-inputs"},B=r(()=>e("label",null,"Fecha Inicial",-1)),O={class:"fecha-inputs"},R=r(()=>e("label",null,"Fecha Final",-1)),T=r(()=>e("div",{style:{"margin-top":"20px"}},null,-1));function L(c,i,s,n,h,o){return I(),w("div",null,[W,e("div",z,[e("div",k,[e("div",K,[B,p(e("input",{type:"date","onUpdate:modelValue":i[0]||(i[0]=a=>n.fechaInicial=a)},null,512),[[m,n.fechaInicial]])]),e("div",O,[R,p(e("input",{type:"date","onUpdate:modelValue":i[1]||(i[1]=a=>n.fechaFinal=a)},null,512),[[m,n.fechaFinal]])])])]),T,e("button",{onClick:i[2]||(i[2]=(...a)=>n.generarPDF&&n.generarPDF(...a))},"Generar PDF")])}const U=C(A,[["render",L],["__scopeId","data-v-6de0719d"]]);export{U as default};
