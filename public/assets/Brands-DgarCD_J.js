import{_ as A,r as d,n as N,g as O,o as W,d as f,m as t,q as _,t as F,v as K,F as R,u as T,b,y as g,z as k,A as z}from"./index-Ca4MJmB5.js";import{E as L}from"./jspdf.plugin.autotable-BZfwaWVG.js";import{a as C}from"./axios-B4uVmeYG.js";const U={name:"Accordion",setup(){const o=d(""),n=d(""),h=d("PROYECTO AGRÍCOLA"),c=d("Dirección del Proyecto"),s=N([]),u=d(""),e=()=>{C.get("http://hogarsantaluisa.test/cuentasB/getConcatenada").then(i=>{s.splice(0,s.length,...i.data)}).catch(i=>{console.error(i)})},m=O(()=>s.find(i=>i.cuenta_bancaria===u.value)),p=i=>typeof i=="number"?i.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2}):i,S=async()=>{try{const w=(await C.post("http://hogarsantaluisa.test/in_eg/fechaBanco",{fechaInicial:o.value,fechaFinal:n.value,banco_y_cuenta:u.value})).data,l=new L("landscape");l.setFontSize(16),l.text(h.value,148.5,27,{align:"center"}),l.rect(60,17,170,15),l.setFontSize(12),l.text(`Dirección del Proyecto: ${c.value}`,20,40);const B="REPORTE: LIBRO BANCOS";l.setFontSize(10),l.text(B,20,50);const D=`ESPECIFICACIÓN: Desde: ${o.value}, Hasta: ${n.value}`;l.text(D,20,60);const x=`CUENTA BANCARIA: ${m.value?m.value.banco_y_cuenta:""}`;l.text(x,20,70);const I=[{title:"Conteo",dataKey:"nomenclatura"},{title:"Fecha",dataKey:"fecha"},{title:"Cuenta",dataKey:"cuenta"},{title:"Descripción",dataKey:"descripcion"},{title:"Acredita",dataKey:"acredita"},{title:"Debita",dataKey:"debita"},{title:"Saldo",dataKey:"total"}],P=w.map(a=>{const y=a.total?`Q. ${p(parseFloat(a.total))}`:"";return a.cuenta==="Saldo inicial"||a.cuenta==="Suma total bancos"?{nomenclatura:a.nomenclatura,fecha:a.fecha||"",cuenta:a.cuenta,descripcion:a.descripcion,acredita:"",debita:"",total:{content:y,styles:{fontStyle:"bold"}}}:{nomenclatura:a.nomenclatura,fecha:a.fecha,cuenta:a.cuenta,descripcion:a.descripcion,acredita:a.acredita?`Q. ${p(parseFloat(a.acredita))}`:"",debita:a.debita?`Q. ${p(parseFloat(a.debita))}`:"",total:y}});l.autoTable({columns:I,body:P,startY:80,theme:"grid",styles:{cellPadding:3,fontSize:8,halign:"left",valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},columnStyles:{nomenclatura:{minCellWidth:20,overflow:"visible",halign:"left"},fecha:{minCellWidth:20,overflow:"visible",halign:"left"},cuenta:{minCellWidth:40,overflow:"linebreak",halign:"left"},descripcion:{minCellWidth:40,overflow:"linebreak",halign:"left"},acredita:{minCellWidth:20,halign:"right"},debita:{minCellWidth:20,halign:"right"},total:{minCellWidth:20,halign:"right"}}});const v=await(await window.showSaveFilePicker({suggestedName:"libro_bancos_agricola.pdf",types:[{description:"PDF Files",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await v.write(l.output("blob")),await v.close()}catch(i){console.error("Error al generar el PDF:",i)}};return W(()=>{e()}),{fechaInicial:o,fechaFinal:n,nombreEncabezado:h,direccionProyecto:c,generarPDF:S,cargarBancosNoCuenta:e,cuentaBName:u,cuentas_bancarias:s,cuentaBancariaSeleccionada:m}}},r=o=>(k("data-v-a8767c68"),o=o(),z(),o),V=r(()=>t("label",null,"LIBRO DE BANCOS",-1)),G={class:"division-container"},M={class:"numero-fecha-container"},Q={class:"fecha-inputs"},Y=r(()=>t("label",null,"Fecha Inicial",-1)),$={class:"fecha-inputs"},q=r(()=>t("label",null,"Fecha Final",-1)),H={class:"division-container"},j={class:"numero-fecha-container"},J={class:"numero-inputs"},X=r(()=>t("label",null,"Cuenta bancaria:",-1)),Z=["value"],E=r(()=>t("div",{style:{"margin-top":"20px"}},null,-1));function aa(o,n,h,c,s,u){return b(),f("div",null,[V,t("div",G,[t("div",M,[t("div",Q,[Y,_(t("input",{type:"date","onUpdate:modelValue":n[0]||(n[0]=e=>c.fechaInicial=e)},null,512),[[F,c.fechaInicial]])]),t("div",$,[q,_(t("input",{type:"date","onUpdate:modelValue":n[1]||(n[1]=e=>c.fechaFinal=e)},null,512),[[F,c.fechaFinal]])])])]),t("div",H,[t("div",j,[t("div",J,[X,_(t("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>c.cuentaBName=e)},[(b(!0),f(R,null,T(c.cuentas_bancarias,e=>(b(),f("option",{value:e.cuenta_bancaria},g(e.banco_y_cuenta),9,Z))),256))],512),[[K,c.cuentaBName]])])])]),E,t("button",{onClick:n[3]||(n[3]=(...e)=>c.generarPDF&&c.generarPDF(...e))},"Generar PDF")])}const ia=A(U,[["render",aa],["__scopeId","data-v-a8767c68"]]);export{ia as default};
